"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[915],{915:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(1294),a=t(7762),s=t(5861),i=t(9439),c=t(4687),o=t.n(c),u=t(4190),l=t(5863),d=t(824),f=t(5777),m=t(2791),x=t(9434),p=t(4826),h=t(184);function v(){var e=(0,x.v9)((function(e){return e.contacts.value})),n=(0,x.I0)(),t=(0,m.useState)((function(){return JSON.parse(window.localStorage.getItem("name"))?JSON.parse(window.localStorage.getItem("name")):""})),r=(0,i.Z)(t,2),c=r[0],v=r[1],g=(0,m.useState)((function(){return JSON.parse(window.localStorage.getItem("number"))?JSON.parse(window.localStorage.getItem("number")):""})),b=(0,i.Z)(g,2),w=b[0],j=b[1];(0,m.useEffect)((function(){window.localStorage.setItem("name",JSON.stringify(c))}),[c]),(0,m.useEffect)((function(){window.localStorage.setItem("number",JSON.stringify(w))}),[w]);var I=function(){var t=(0,s.Z)(o().mark((function t(r){var s,i,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),(s=r.currentTarget.elements.submitButton).disabled=!0,i=(0,a.Z)(e),t.prev=4,i.s();case 6:if((u=i.n()).done){t.next=14;break}if(u.value.name.toLowerCase()!==c.toLowerCase()){t.next=12;break}return alert("".concat(c," is already in contacts.")),s.disabled=!1,t.abrupt("return");case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:return t.prev=22,t.next=25,n((0,p.u)({name:c,number:w}));case 25:s.disabled=!1,t.next=32;break;case 28:t.prev=28,t.t1=t.catch(22),console.log(t.t1),s.disabled=!1;case 32:v(""),j("");case 34:case"end":return t.stop()}}),t,null,[[4,16,19,22],[22,28]])})));return function(e){return t.apply(this,arguments)}}(),k=function(e){var n=e.target.name,t=e.target.value;switch(n){case"name":v(t);break;case"number":j(t)}};return(0,h.jsx)("form",{onSubmit:I,children:(0,h.jsxs)(u.kC,{minWidth:"max-content",alignItems:"center",justifyContent:"center",gap:6,flexDirection:"column",children:[(0,h.jsxs)(l.NI,{w:"inherit",children:[(0,h.jsx)(l.lX,{children:"Name"}),(0,h.jsx)(d.II,{w:[null,200,300,400],value:c,onChange:k,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,h.jsxs)(l.NI,{w:"inherit",children:[(0,h.jsx)(l.lX,{children:"Number"}),(0,h.jsx)(d.II,{w:[null,200,300,400],value:w,onChange:k,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,h.jsx)(f.zx,{type:"submit",name:"submitButton",children:"add contacts"})]})})}var g=t(8699),b=t(1173),w=function(e){var n=e.contact,t=n.name,r=n.number,a=n.id,c=(0,m.useState)(!1),l=(0,i.Z)(c,2),d=l[0],p=l[1],v=(0,x.I0)(),w=function(){var e=(0,s.Z)(o().mark((function e(n,t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,v((0,b.G)(t));case 4:p(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),p(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,h.jsx)(u.HC,{children:(0,h.jsxs)(u.kC,{justify:"space-between",gap:4,children:[(0,h.jsxs)(u.xu,{display:"flex",alignItems:"center",children:[(0,h.jsx)(u.xv,{as:"span",maxWidth:["70px","300px","400px"],noOfLines:1,children:t}),(0,h.jsxs)(u.xv,{as:"span",maxWidth:["140px","300px","400px"],noOfLines:1,children:[": ",r]})]}),(0,h.jsx)(f.hU,{type:"button",onClick:function(e){return w(e,a)},"aria-label":"Delete",isLoading:d,icon:(0,h.jsx)(g.pJ,{})})]})})},j=function(){var e=(0,x.v9)((function(e){return e.contacts.value})),n=(0,x.v9)((function(e){return e.filter.value})),t=(0,m.useMemo)((function(){return n?e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):e}),[e,n]);return(0,h.jsx)(u.kC,{minWidth:"max-content",gap:2,flexDirection:"column",children:t&&(0,h.jsx)(u.aV,{spacing:4,children:t.map((function(e){return(0,h.jsx)(w,{contact:e},e.id)}))})})},I=t(6895),k=function(){var e=(0,x.v9)((function(e){return e.filter.value})),n=(0,x.I0)();return(0,h.jsx)(u.kC,{minWidth:"max-content",alignItems:"center",justifyContent:"center",gap:2,flexDirection:"column",marginBottom:4,children:(0,h.jsxs)(l.NI,{w:"inherit",children:[(0,h.jsx)(l.lX,{children:"Find contacts by name"}),(0,h.jsx)(d.II,{w:[null,200,300,400],value:e,onChange:function(e){return n((0,I.w)(e.target.value))},type:"text",name:"filter",title:"filter",required:!0})]})})},C=t(475),y=function(){var e=(0,x.I0)(),n=(0,x.v9)((function(e){return e.auth.isLoggedIn}));return(0,m.useEffect)((function(){n&&e((0,C.Q)())}),[e,n]),(0,h.jsxs)("div",{children:[(0,h.jsx)(r.$,{title:"Phonebook",children:(0,h.jsx)(v,{})}),(0,h.jsxs)(r.$,{title:"Contacts",children:[(0,h.jsx)(k,{}),(0,h.jsx)(j,{})]})]})}}}]);
//# sourceMappingURL=915.2b4cb904.chunk.js.map