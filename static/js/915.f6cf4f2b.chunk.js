"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[915],{915:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(1294),a=t(1413),i=t(7762),s=t(5861),c=t(9439),o=t(4687),u=t.n(o),l=t(7140),d=t(4190),m=t(5863),f=t(824),x=t(5777),h=t(2791),p=t(9434),v=t(5705),g=t(1724),j=t(4826),b=t(184),w=g.Ry().shape({name:g.Z_().matches("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$","Name is not valid").required(),number:g.Z_().required()}),I=function(){var e=(0,p.v9)((function(e){return e.contacts.value})),n=(0,p.I0)(),t=(0,l.pm)(),r=(0,h.useState)((function(){return JSON.parse(window.localStorage.getItem("name"))?JSON.parse(window.localStorage.getItem("name")):""})),o=(0,c.Z)(r,2),g=o[0],I=o[1],k=(0,h.useState)((function(){return JSON.parse(window.localStorage.getItem("number"))?JSON.parse(window.localStorage.getItem("number")):""})),S=(0,c.Z)(k,2),C=S[0],y=S[1];(0,h.useEffect)((function(){window.localStorage.setItem("name",JSON.stringify(g))}),[g]),(0,h.useEffect)((function(){window.localStorage.setItem("number",JSON.stringify(C))}),[C]);var N=function(e){var n=e.target.name,t=e.target.value;switch(n){case"name":I(t);break;case"number":y(t)}},Z=function(){var r=(0,s.Z)(u().mark((function r(a,s){var c,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=(0,i.Z)(e),r.prev=1,c.s();case 3:if((o=c.n()).done){r.next=11;break}if(o.value.name.toLowerCase()!==a.name.toLowerCase()){r.next=9;break}return t({title:"Error",description:"".concat(a.name," is already in contacts."),status:"error",duration:3e3,isClosable:!0,position:"top-right"}),s.setSubmitting(!1),r.abrupt("return");case 9:r.next=3;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),c.e(r.t0);case 16:return r.prev=16,c.f(),r.finish(16);case 19:return r.prev=19,r.next=22,n((0,j.u)(a));case 22:I(""),y(""),s.resetForm(),r.next=30;break;case 27:r.prev=27,r.t1=r.catch(19),s.setSubmitting(!1);case 30:case"end":return r.stop()}}),r,null,[[1,13,16,19],[19,27]])})));return function(e,n){return r.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(v.J9,{initialValues:{name:g,number:C},onSubmit:Z,validationSchema:w,children:function(e){return(0,b.jsx)(v.l0,{onChange:N,children:(0,b.jsxs)(d.kC,{minWidth:"max-content",alignItems:"center",justifyContent:"center",gap:6,flexDirection:"column",children:[(0,b.jsx)(v.gN,{name:"name",children:function(e){var n=e.field,t=e.form;return(0,b.jsxs)(m.NI,{w:"inherit",isInvalid:t.errors.name&&t.touched.name,children:[(0,b.jsx)(m.lX,{children:"Name"}),(0,b.jsx)(f.II,(0,a.Z)({w:[null,200,300,400],placeholder:"name",type:"text"},n)),(0,b.jsx)(m.J1,{children:t.errors.name})]})}}),(0,b.jsx)(v.gN,{name:"number",children:function(e){var n=e.field,t=e.form;return(0,b.jsxs)(m.NI,{w:"inherit",isInvalid:t.errors.number&&t.touched.number,children:[(0,b.jsx)(m.lX,{children:"Number"}),(0,b.jsx)(f.II,(0,a.Z)({w:[null,200,300,400],placeholder:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",type:"text"},n)),(0,b.jsx)(m.J1,{children:t.errors.number})]})}}),(0,b.jsx)(x.zx,{type:"submit",isLoading:e.isSubmitting,children:"add contact"})]})})}})})},k=t(8699),S=t(1173),C=function(e){var n=e.contact,t=n.name,r=n.number,a=n.id,i=(0,h.useState)(!1),o=(0,c.Z)(i,2),l=o[0],m=o[1],f=(0,p.I0)(),v=function(){var e=(0,s.Z)(u().mark((function e(n,t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,f((0,S.G)(t));case 4:m(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),m(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,b.jsx)(d.HC,{children:(0,b.jsxs)(d.kC,{justify:"space-between",gap:4,children:[(0,b.jsxs)(d.xu,{display:"flex",alignItems:"center",children:[(0,b.jsx)(d.xv,{as:"span",maxWidth:["70px","300px","400px"],noOfLines:1,children:t}),(0,b.jsxs)(d.xv,{as:"span",maxWidth:["140px","300px","400px"],noOfLines:1,children:[": ",r]})]}),(0,b.jsx)(x.hU,{type:"button",onClick:function(e){return v(e,a)},"aria-label":"Delete",isLoading:l,icon:(0,b.jsx)(k.pJ,{})})]})})},y=function(){var e=(0,p.v9)((function(e){return e.contacts.value})),n=(0,p.v9)((function(e){return e.filter.value})),t=(0,h.useMemo)((function(){return n?e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):e}),[e,n]);return(0,b.jsx)(d.kC,{minWidth:"max-content",gap:2,flexDirection:"column",children:t&&(0,b.jsx)(d.aV,{spacing:4,children:t.map((function(e){return(0,b.jsx)(C,{contact:e},e.id)}))})})},N=t(6895),Z=function(){var e=(0,p.v9)((function(e){return e.filter.value})),n=(0,p.I0)();return(0,b.jsx)(d.kC,{minWidth:"max-content",alignItems:"center",justifyContent:"center",gap:2,flexDirection:"column",marginBottom:4,children:(0,b.jsxs)(m.NI,{w:"inherit",children:[(0,b.jsx)(m.lX,{children:"Find contacts by name"}),(0,b.jsx)(f.II,{w:[null,200,300,400],value:e,onChange:function(e){return n((0,N.w)(e.target.value))},type:"text",name:"filter",title:"filter",required:!0})]})})},J=t(475),_=function(){var e=(0,p.I0)(),n=(0,p.v9)((function(e){return e.auth.isLoggedIn}));return(0,h.useEffect)((function(){n&&e((0,J.Q)())}),[e,n]),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.$,{title:"Phonebook",children:(0,b.jsx)(I,{})}),(0,b.jsxs)(r.$,{title:"Contacts",children:[(0,b.jsx)(Z,{}),(0,b.jsx)(y,{})]})]})}}}]);
//# sourceMappingURL=915.f6cf4f2b.chunk.js.map